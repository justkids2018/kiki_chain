# Flutter Web Docker éƒ¨ç½²æŒ‡å—

**åˆ›å»ºæ—¶é—´**: 2025å¹´8æœˆ9æ—¥  
**æœ€åä¿®æ”¹**: 2025å¹´8æœˆ9æ—¥  
**ç‰ˆæœ¬**: v1.0.0

## æ›´æ”¹è®°å½•

| æ—¶é—´ | ç‰ˆæœ¬ | ä¿®æ”¹å†…å®¹ | ä¿®æ”¹äºº |
|------|------|----------|--------|
| 2025-08-09 | v1.0.0 | åˆå§‹Dockeréƒ¨ç½²æ–‡æ¡£åˆ›å»º | Flutteræ¶æ„å¸ˆ |

---

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•å°†å¥‡å¥‡æ¼«æ¸¸è®°Flutter Webåº”ç”¨é€šè¿‡Dockerè¿›è¡Œå®¹å™¨åŒ–éƒ¨ç½²ã€‚åŒ…å«å®Œæ•´çš„æ„å»ºæµç¨‹ã€å¤šç¯å¢ƒé…ç½®ã€CI/CDé›†æˆå’Œç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µã€‚

---

## 2. é¡¹ç›®ç»“æ„å‡†å¤‡

### 2.1 Dockerç›¸å…³æ–‡ä»¶ç»“æ„

```
kikichain/
â”œâ”€â”€ Dockerfile              # ç”Ÿäº§ç¯å¢ƒDockeræ–‡ä»¶
â”œâ”€â”€ Dockerfile.dev          # å¼€å‘ç¯å¢ƒDockeræ–‡ä»¶
â”œâ”€â”€ docker-compose.yml      # Docker Composeé…ç½®
â”œâ”€â”€ docker-compose.dev.yml  # å¼€å‘ç¯å¢ƒComposeé…ç½®
â”œâ”€â”€ .dockerignore           # Dockerå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ nginx.conf              # Nginxé…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ build.sh           # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh          # éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ docker-entrypoint.sh # å®¹å™¨å¯åŠ¨è„šæœ¬
â””â”€â”€ web/                    # Flutter Webæ„å»ºè¾“å‡º
    â”œâ”€â”€ index.html
    â”œâ”€â”€ main.dart.js
    â””â”€â”€ assets/
```

### 2.2 .dockerignore æ–‡ä»¶

```dockerignore
# Flutterç›¸å…³
.dart_tool/
.packages
.pub-cache/
.pub/
build/
ios/
android/
macos/
windows/
linux/

# Gitç›¸å…³
.git/
.gitignore

# IDEç›¸å…³
.idea/
.vscode/
*.iml

# æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶
*.log
.DS_Store
Thumbs.db

# æ–‡æ¡£å’Œæµ‹è¯•
doc/
test/
README.md

# ç¯å¢ƒé…ç½®ï¼ˆå®‰å…¨è€ƒè™‘ï¼‰
.env
config/*.env

# ä¾èµ–å’Œç¼“å­˜
node_modules/
.npm/
```

---

## 3. Dockerfile é…ç½®

### 3.1 ç”Ÿäº§ç¯å¢ƒ Dockerfile

```dockerfile
# å¤šé˜¶æ®µæ„å»ºï¼šæ„å»ºé˜¶æ®µ
FROM cirrusci/flutter:stable AS builder

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶pubspecæ–‡ä»¶
COPY pubspec.yaml pubspec.lock ./

# å®‰è£…ä¾èµ–
RUN flutter pub get

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»ºWebåº”ç”¨
RUN flutter build web --release --web-renderer html

# ç”Ÿäº§é˜¶æ®µï¼šNginxæœåŠ¡å™¨
FROM nginx:alpine AS production

# å®‰è£…å¿…è¦çš„åŒ…
RUN apk add --no-cache tzdata

# è®¾ç½®æ—¶åŒº
ENV TZ=Asia/Shanghai

# å¤åˆ¶Nginxé…ç½®
COPY nginx.conf /etc/nginx/nginx.conf

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder /app/build/web /usr/share/nginx/html

# å¤åˆ¶å¯åŠ¨è„šæœ¬
COPY scripts/docker-entrypoint.sh /docker-entrypoint.sh
RUN chmod +x /docker-entrypoint.sh

# æš´éœ²ç«¯å£
EXPOSE 80

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost/ || exit 1

# å¯åŠ¨å‘½ä»¤
ENTRYPOINT ["/docker-entrypoint.sh"]
CMD ["nginx", "-g", "daemon off;"]
```

### 3.2 å¼€å‘ç¯å¢ƒ Dockerfile.dev

```dockerfile
FROM cirrusci/flutter:stable

# å®‰è£…å¿…è¦å·¥å…·
RUN apt-get update && apt-get install -y \
    curl \
    vim \
    && rm -rf /var/lib/apt/lists/*

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶æºä»£ç 
COPY . .

# å®‰è£…ä¾èµ–
RUN flutter pub get

# æš´éœ²å¼€å‘æœåŠ¡å™¨ç«¯å£
EXPOSE 3000

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
CMD ["flutter", "run", "-d", "web-server", "--web-hostname", "0.0.0.0", "--web-port", "3000"]
```

---

## 4. Nginx é…ç½®

### 4.1 nginx.conf

```nginx
events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    # æ—¥å¿—æ ¼å¼
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';

    # è®¿é—®æ—¥å¿—
    access_log /var/log/nginx/access.log main;
    error_log /var/log/nginx/error.log warn;

    # åŸºç¡€é…ç½®
    sendfile        on;
    tcp_nopush      on;
    tcp_nodelay     on;
    keepalive_timeout 65;
    types_hash_max_size 2048;

    # Gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/javascript
        application/xml+rss
        application/json
        font/truetype
        font/opentype
        application/vnd.ms-fontobject
        image/svg+xml;

    # æœåŠ¡å™¨é…ç½®
    server {
        listen 80;
        server_name _;
        root /usr/share/nginx/html;
        index index.html;

        # å®‰å…¨å¤´
        add_header X-Frame-Options "SAMEORIGIN" always;
        add_header X-Content-Type-Options "nosniff" always;
        add_header X-XSS-Protection "1; mode=block" always;
        add_header Referrer-Policy "no-referrer-when-downgrade" always;
        add_header Content-Security-Policy "default-src 'self' http: https: data: blob: 'unsafe-inline'" always;

        # Flutter Webè·¯ç”±å¤„ç†
        location / {
            try_files $uri $uri/ /index.html;
            
            # ç¼“å­˜ç­–ç•¥
            location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
                expires 1y;
                add_header Cache-Control "public, immutable";
            }
            
            location ~* \.(html)$ {
                expires -1;
                add_header Cache-Control "no-cache, no-store, must-revalidate";
            }
        }

        # APIä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
        location /api/ {
            proxy_pass http://api-server:8080/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        # å¥åº·æ£€æŸ¥ç«¯ç‚¹
        location /health {
            access_log off;
            return 200 "healthy\n";
            add_header Content-Type text/plain;
        }

        # é”™è¯¯é¡µé¢
        error_page 404 /index.html;
        error_page 500 502 503 504 /50x.html;
        location = /50x.html {
            root /usr/share/nginx/html;
        }
    }
}
```

---

## 5. Docker Compose é…ç½®

### 5.1 docker-compose.yml (ç”Ÿäº§ç¯å¢ƒ)

```yaml
version: '3.8'

services:
  kikichain-web:
    build:
      context: .
      dockerfile: Dockerfile
      target: production
    image: kikichain/web:latest
    container_name: kikichain-web
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    environment:
      - NODE_ENV=production
      - TZ=Asia/Shanghai
    volumes:
      - ./logs:/var/log/nginx
      - ./ssl:/etc/nginx/ssl:ro  # SSLè¯ä¹¦ï¼ˆå¦‚æœä½¿ç”¨HTTPSï¼‰
    networks:
      - kikichain-network
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.kikichain.rule=Host(`kikichain.com`)"
      - "traefik.http.services.kikichain.loadbalancer.server.port=80"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  # APIåç«¯æœåŠ¡ï¼ˆå¦‚æœæœ‰ï¼‰
  kikichain-api:
    image: kikichain/api:latest
    container_name: kikichain-api
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      - NODE_ENV=production
      - DATABASE_URL=postgresql://user:password@db:5432/kikichain
    networks:
      - kikichain-network
    depends_on:
      - db

  # æ•°æ®åº“æœåŠ¡ï¼ˆå¦‚æœéœ€è¦ï¼‰
  db:
    image: postgres:14-alpine
    container_name: kikichain-db
    restart: unless-stopped
    environment:
      - POSTGRES_DB=kikichain
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql
    networks:
      - kikichain-network

  # Redisç¼“å­˜ï¼ˆå¦‚æœéœ€è¦ï¼‰
  redis:
    image: redis:7-alpine
    container_name: kikichain-redis
    restart: unless-stopped
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    networks:
      - kikichain-network

networks:
  kikichain-network:
    driver: bridge

volumes:
  postgres_data:
  redis_data:
```

### 5.2 docker-compose.dev.yml (å¼€å‘ç¯å¢ƒ)

```yaml
version: '3.8'

services:
  kikichain-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    image: kikichain/web:dev
    container_name: kikichain-dev
    ports:
      - "3000:3000"
    volumes:
      - .:/app
      - /app/.dart_tool
      - /app/build
    environment:
      - FLUTTER_ENV=development
    networks:
      - kikichain-dev-network
    stdin_open: true
    tty: true

networks:
  kikichain-dev-network:
    driver: bridge
```

---

## 6. æ„å»ºå’Œéƒ¨ç½²è„šæœ¬

### 6.1 æ„å»ºè„šæœ¬ (scripts/build.sh)

```bash
#!/bin/bash

# æ„å»ºè„šæœ¬
set -e

# é¢œè‰²å®šä¹‰
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# å‡½æ•°å®šä¹‰
log_info() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

log_warn() {
    echo -e "${YELLOW}[WARN]${NC} $1"
}

log_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# æ£€æŸ¥å‚æ•°
ENVIRONMENT=${1:-production}
VERSION=${2:-latest}

log_info "å¼€å§‹æ„å»º kikichain webåº”ç”¨..."
log_info "ç¯å¢ƒ: $ENVIRONMENT"
log_info "ç‰ˆæœ¬: $VERSION"

# æ¸…ç†ä¹‹å‰çš„æ„å»º
log_info "æ¸…ç†ä¹‹å‰çš„æ„å»º..."
rm -rf build/web

# æ£€æŸ¥Flutterç¯å¢ƒ
if ! command -v flutter &> /dev/null; then
    log_error "Flutter æœªå®‰è£…æˆ–æœªåœ¨PATHä¸­"
    exit 1
fi

# è·å–ä¾èµ–
log_info "è·å–ä¾èµ–..."
flutter pub get

# è¿è¡Œæµ‹è¯•
log_info "è¿è¡Œæµ‹è¯•..."
flutter test

# æ„å»ºWebåº”ç”¨
log_info "æ„å»ºWebåº”ç”¨..."
if [ "$ENVIRONMENT" = "production" ]; then
    flutter build web --release --web-renderer html --dart-define=ENV=production
elif [ "$ENVIRONMENT" = "staging" ]; then
    flutter build web --release --web-renderer html --dart-define=ENV=staging
else
    flutter build web --web-renderer html --dart-define=ENV=development
fi

# æ„å»ºDockeré•œåƒ
log_info "æ„å»ºDockeré•œåƒ..."
docker build -t kikichain/web:$VERSION .
docker build -t kikichain/web:latest .

# æ ‡è®°é•œåƒ
if [ "$ENVIRONMENT" = "production" ]; then
    docker tag kikichain/web:$VERSION kikichain/web:prod
elif [ "$ENVIRONMENT" = "staging" ]; then
    docker tag kikichain/web:$VERSION kikichain/web:staging
fi

log_info "æ„å»ºå®Œæˆï¼"
log_info "é•œåƒ: kikichain/web:$VERSION"

# æ˜¾ç¤ºé•œåƒå¤§å°
docker images kikichain/web:$VERSION
```

### 6.2 éƒ¨ç½²è„šæœ¬ (scripts/deploy.sh)

```bash
#!/bin/bash

# éƒ¨ç½²è„šæœ¬
set -e

# é¢œè‰²å®šä¹‰
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

log_info() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

log_warn() {
    echo -e "${YELLOW}[WARN]${NC} $1"
}

log_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# æ£€æŸ¥å‚æ•°
ENVIRONMENT=${1:-production}
VERSION=${2:-latest}

log_info "å¼€å§‹éƒ¨ç½² kikichain webåº”ç”¨..."
log_info "ç¯å¢ƒ: $ENVIRONMENT"
log_info "ç‰ˆæœ¬: $VERSION"

# åˆ›å»ºå¿…è¦çš„ç›®å½•
mkdir -p logs ssl

# åœæ­¢ç°æœ‰å®¹å™¨
log_info "åœæ­¢ç°æœ‰å®¹å™¨..."
docker-compose down

# æ‹‰å–æœ€æ–°é•œåƒ
log_info "æ‹‰å–é•œåƒ kikichain/web:$VERSION..."
docker pull kikichain/web:$VERSION

# å¯åŠ¨æ–°å®¹å™¨
log_info "å¯åŠ¨æ–°å®¹å™¨..."
export IMAGE_VERSION=$VERSION
docker-compose up -d

# ç­‰å¾…æœåŠ¡å¯åŠ¨
log_info "ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 10

# å¥åº·æ£€æŸ¥
log_info "æ‰§è¡Œå¥åº·æ£€æŸ¥..."
for i in {1..30}; do
    if curl -f http://localhost/health > /dev/null 2>&1; then
        log_info "æœåŠ¡å¥åº·æ£€æŸ¥é€šè¿‡ï¼"
        break
    fi
    if [ $i -eq 30 ]; then
        log_error "æœåŠ¡å¥åº·æ£€æŸ¥å¤±è´¥ï¼"
        docker-compose logs kikichain-web
        exit 1
    fi
    log_warn "ç­‰å¾…æœåŠ¡å¯åŠ¨... ($i/30)"
    sleep 2
done

# æ¸…ç†æ—§é•œåƒ
log_info "æ¸…ç†æ—§é•œåƒ..."
docker image prune -f

log_info "éƒ¨ç½²å®Œæˆï¼"
log_info "åº”ç”¨åœ°å€: http://localhost"

# æ˜¾ç¤ºæœåŠ¡çŠ¶æ€
docker-compose ps
```

### 6.3 å®¹å™¨å¯åŠ¨è„šæœ¬ (scripts/docker-entrypoint.sh)

```bash
#!/bin/sh

# Dockerå®¹å™¨å¯åŠ¨è„šæœ¬
set -e

# ç¯å¢ƒå˜é‡é»˜è®¤å€¼
NODE_ENV=${NODE_ENV:-production}
TZ=${TZ:-Asia/Shanghai}

# è®¾ç½®æ—¶åŒº
ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p /var/log/nginx

# æ£€æŸ¥Nginxé…ç½®
nginx -t

# å¯åŠ¨Nginx
echo "Starting Nginx in $NODE_ENV mode..."
echo "Current time: $(date)"

# æ‰§è¡Œä¼ å…¥çš„å‘½ä»¤
exec "$@"
```

---

## 7. CI/CD é›†æˆ

### 7.1 GitHub Actions

```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - uses: subosito/flutter-action@v2
      with:
        flutter-version: '3.10.0'
        
    - name: Install dependencies
      run: flutter pub get
      
    - name: Run tests
      run: flutter test
      
    - name: Analyze code
      run: flutter analyze

  build:
    needs: test
    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write
      
    steps:
    - name: Checkout
      uses: actions/checkout@v3
      
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v2
      
    - name: Log in to Container Registry
      uses: docker/login-action@v2
      with:
        registry: ${{ env.REGISTRY }}
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}
        
    - name: Extract metadata
      id: meta
      uses: docker/metadata-action@v4
      with:
        images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
        tags: |
          type=ref,event=branch
          type=ref,event=pr
          type=sha
          
    - name: Build and push Docker image
      uses: docker/build-push-action@v4
      with:
        context: .
        push: true
        tags: ${{ steps.meta.outputs.tags }}
        labels: ${{ steps.meta.outputs.labels }}
        cache-from: type=gha
        cache-to: type=gha,mode=max

  deploy:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - name: Deploy to production
      uses: appleboy/ssh-action@v0.1.5
      with:
        host: ${{ secrets.HOST }}
        username: ${{ secrets.USERNAME }}
        key: ${{ secrets.SSH_KEY }}
        script: |
          cd /opt/kikichain
          docker pull ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:main
          docker-compose down
          docker-compose up -d
          docker system prune -f
```

---

## 8. ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ

### 8.1 å®‰å…¨é…ç½®

```bash
# åˆ›å»ºérootç”¨æˆ·è¿è¡Œåº”ç”¨
RUN addgroup -g 1001 -S kikichain && \
    adduser -S kikichain -u 1001 -G kikichain

# è®¾ç½®æ–‡ä»¶æƒé™
RUN chown -R kikichain:kikichain /usr/share/nginx/html
USER kikichain
```

### 8.2 ç›‘æ§å’Œæ—¥å¿—

```yaml
# æ·»åŠ åˆ°docker-compose.yml
  prometheus:
    image: prom/prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml

  grafana:
    image: grafana/grafana
    ports:
      - "3001:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
    volumes:
      - grafana_data:/var/lib/grafana
```

### 8.3 å¤‡ä»½ç­–ç•¥

```bash
#!/bin/bash
# å¤‡ä»½è„šæœ¬

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/backup"

# å¤‡ä»½æ•°æ®åº“
docker exec kikichain-db pg_dump -U user kikichain > $BACKUP_DIR/db_$DATE.sql

# å¤‡ä»½åº”ç”¨é…ç½®
tar -czf $BACKUP_DIR/config_$DATE.tar.gz nginx.conf docker-compose.yml

# æ¸…ç†7å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "*.sql" -mtime +7 -delete
find $BACKUP_DIR -name "*.tar.gz" -mtime +7 -delete
```

---

## 9. å¸¸ç”¨å‘½ä»¤

### 9.1 å¼€å‘å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.dev.yml up

# æ„å»ºç”Ÿäº§é•œåƒ
./scripts/build.sh production v1.0.0

# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
./scripts/deploy.sh production v1.0.0

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f kikichain-web

# è¿›å…¥å®¹å™¨
docker exec -it kikichain-web sh

# é‡å¯æœåŠ¡
docker-compose restart kikichain-web
```

### 9.2 ç»´æŠ¤å‘½ä»¤

```bash
# æ¸…ç†æ— ç”¨é•œåƒ
docker system prune -a

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats

# å¤‡ä»½æ•°æ®
docker exec kikichain-db pg_dump -U user kikichain > backup.sql

# æ¢å¤æ•°æ®
docker exec -i kikichain-db psql -U user kikichain < backup.sql

# æ›´æ–°æœåŠ¡
docker-compose pull && docker-compose up -d
```

---

## 10. æ•…éšœæ’é™¤

### 10.1 å¸¸è§é—®é¢˜

#### é—®é¢˜1: å®¹å™¨å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥æ—¥å¿—
docker-compose logs kikichain-web

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps -a

# æ£€æŸ¥é•œåƒ
docker images

# é‡æ–°æ„å»º
docker-compose build --no-cache
```

#### é—®é¢˜2: ç½‘ç»œè¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥ç½‘ç»œ
docker network ls
docker network inspect kikichain-network

# æµ‹è¯•è¿æ¥
docker exec kikichain-web ping kikichain-api
docker exec kikichain-web curl http://kikichain-api:8080/health
```

#### é—®é¢˜3: æ€§èƒ½é—®é¢˜
```bash
# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats kikichain-web

# æŸ¥çœ‹è¿›ç¨‹
docker exec kikichain-web ps aux

# æ£€æŸ¥ç£ç›˜ç©ºé—´
docker system df
```

### 10.2 ç›‘æ§æŒ‡æ ‡

- **å®¹å™¨çŠ¶æ€**: è¿è¡ŒçŠ¶æ€ã€é‡å¯æ¬¡æ•°
- **èµ„æºä½¿ç”¨**: CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œ
- **åº”ç”¨æŒ‡æ ‡**: å“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€å¹¶å‘æ•°
- **ä¸šåŠ¡æŒ‡æ ‡**: è®¿é—®é‡ã€ç”¨æˆ·æ•°ã€è½¬åŒ–ç‡

---

## 11. åæ€ä¸æ€»ç»“

### 11.1 å®Œæ•´æ€§æ£€æŸ¥ âœ…
- âœ… æ¶µç›–äº†ä»å¼€å‘åˆ°ç”Ÿäº§çš„å®Œæ•´DockeråŒ–æµç¨‹
- âœ… åŒ…å«äº†å¤šç¯å¢ƒé…ç½®å’ŒCI/CDé›†æˆ
- âœ… æä¾›äº†è¯¦ç»†çš„è„šæœ¬å’Œé…ç½®æ–‡ä»¶

### 11.2 å‡†ç¡®æ€§éªŒè¯ âœ…
- âœ… Dockeré…ç½®ç¬¦åˆæœ€ä½³å®è·µ
- âœ… Nginxé…ç½®é’ˆå¯¹Flutter Webä¼˜åŒ–
- âœ… å®‰å…¨å’Œæ€§èƒ½é…ç½®è€ƒè™‘å‘¨å…¨

### 11.3 å®ç”¨æ€§è¯„ä¼° âœ…
- âœ… å¯ç›´æ¥ç”¨äºé¡¹ç›®çš„DockeråŒ–éƒ¨ç½²
- âœ… æä¾›äº†å®Œæ•´çš„è¿ç»´å’Œæ•…éšœæ’é™¤æŒ‡å—
- âœ… æ”¯æŒå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§å¤šç¯å¢ƒ

### 11.4 æ”¹è¿›å»ºè®®
- ğŸ”§ å¯å¢åŠ Kuberneteséƒ¨ç½²é…ç½®
- ğŸ”§ å¯è¡¥å……æ›´å¤šç›‘æ§å’Œå‘Šè­¦é…ç½®
- ğŸ”§ å¯æ·»åŠ è‡ªåŠ¨æ‰©ç¼©å®¹ç­–ç•¥

æœ¬Dockeréƒ¨ç½²æŒ‡å—ä¸ºé¡¹ç›®æä¾›äº†å®Œæ•´çš„å®¹å™¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œç¡®ä¿åº”ç”¨èƒ½å¤Ÿç¨³å®šã€å®‰å…¨ã€é«˜æ•ˆåœ°è¿è¡Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ã€‚
