# Flutter åŸºç¡€åº“ä½¿ç”¨æŒ‡å—

**åˆ›å»ºæ—¶é—´**: 2025å¹´8æœˆ9æ—¥  
**æœ€åä¿®æ”¹**: 2025å¹´8æœˆ9æ—¥  
**ç‰ˆæœ¬**: v1.0.0

## æ›´æ”¹è®°å½•

| æ—¶é—´ | ç‰ˆæœ¬ | ä¿®æ”¹å†…å®¹ | ä¿®æ”¹äºº |
|------|------|----------|--------|
| 2025-08-09 | v1.0.0 | åˆå§‹åŸºç¡€åº“æ–‡æ¡£åˆ›å»º | Flutteræ¶æ„å¸ˆ |

---

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¥‡å¥‡æ¼«æ¸¸è®°é¡¹ç›®ä¸­ä½¿ç”¨çš„æ ¸å¿ƒåŸºç¡€åº“ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ–¹å¼ã€æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆã€‚è¿™äº›åŸºç¡€åº“æ„æˆäº†é¡¹ç›®çš„æŠ€æœ¯åº•åº§ï¼Œä¸ºä¸šåŠ¡åŠŸèƒ½å¼€å‘æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚

---

## 2. æ—¥å¿—ç³»ç»Ÿ (Logger)

### 2.1 åŸºç¡€ç”¨æ³•

#### 2.1.1 AppLogger ä½¿ç”¨

```dart
import '../../core/logging/app_logger.dart';

class SomeService {
  void performTask() {
    // è°ƒè¯•ä¿¡æ¯
    AppLogger.debug('å¼€å§‹æ‰§è¡Œä»»åŠ¡');
    
    // ä¸€èˆ¬ä¿¡æ¯
    AppLogger.info('ä»»åŠ¡æ‰§è¡Œä¸­...');
    
    // è­¦å‘Šä¿¡æ¯
    AppLogger.warning('å‘ç°æ½œåœ¨é—®é¢˜');
    
    // é”™è¯¯ä¿¡æ¯
    AppLogger.error('ä»»åŠ¡æ‰§è¡Œå¤±è´¥', error, stackTrace);
    
    // è¯¦ç»†ä¿¡æ¯ï¼ˆå¼€å‘è°ƒè¯•ç”¨ï¼‰
    AppLogger.verbose('è¯¦ç»†è°ƒè¯•ä¿¡æ¯');
    
    // ä¸¥é‡é”™è¯¯
    AppLogger.wtf('ä¸åº”è¯¥å‘ç”Ÿçš„é”™è¯¯');
  }
}
```

#### 2.1.2 ç½‘ç»œè¯·æ±‚æ—¥å¿—

```dart
import '../../core/logging/app_logger.dart';

class NetworkService {
  Future<void> makeRequest() async {
    try {
      // è®°å½•è¯·æ±‚å¼€å§‹
      AppLogger.info('ğŸŒ GET /api/users');
      
      final response = await dio.get('/api/users');
      
      // è®°å½•æˆåŠŸå“åº”
      AppLogger.info('âœ… GET /api/users [${response.statusCode}]');
      
    } catch (e) {
      // è®°å½•é”™è¯¯
      AppLogger.error('âŒ GET /api/users failed', e);
    }
  }
}
```

### 2.2 è‡ªå®šä¹‰æ—¥å¿—é…ç½®

```dart
// åˆ›å»ºè‡ªå®šä¹‰Loggerå®ä¾‹
final customLogger = Logger(
  printer: PrettyPrinter(
    methodCount: 3,        // æ˜¾ç¤ºæ–¹æ³•è°ƒç”¨æ ˆå±‚æ•°
    errorMethodCount: 8,   // é”™è¯¯æ—¶æ˜¾ç¤ºæ›´å¤šå±‚æ•°
    lineLength: 80,        // æ¯è¡Œé•¿åº¦
    colors: true,          // å¯ç”¨é¢œè‰²
    printEmojis: true,     // æ˜¾ç¤ºemoji
    printTime: true,       // æ˜¾ç¤ºæ—¶é—´æˆ³
  ),
);
```

### 2.3 æ—¥å¿—çº§åˆ«æ§åˆ¶

```dart
class LogConfig {
  // æ ¹æ®ç¯å¢ƒé…ç½®æ—¥å¿—çº§åˆ«
  static Level getLogLevel() {
    if (EnvConfig.isDebug) {
      return Level.verbose;  // å¼€å‘ç¯å¢ƒæ˜¾ç¤ºæ‰€æœ‰æ—¥å¿—
    } else {
      return Level.warning;  // ç”Ÿäº§ç¯å¢ƒåªæ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯
    }
  }
}
```

---

## 3. ç½‘ç»œåº“ (Dio)

### 3.1 åŸºç¡€ç½‘ç»œè¯·æ±‚

#### 3.1.1 GET è¯·æ±‚

```dart
class ApiService {
  final RequestManager _request = RequestManager.instance;
  
  /// è·å–ç”¨æˆ·åˆ—è¡¨
  Future<List<User>> getUsers() async {
    try {
      // åŸºç¡€GETè¯·æ±‚
      final response = await _request.get<Map<String, dynamic>>('/users');
      
      // å¸¦æŸ¥è¯¢å‚æ•°çš„GETè¯·æ±‚
      final filtered = await _request.get<Map<String, dynamic>>(
        '/users',
        queryParameters: {
          'page': 1,
          'limit': 20,
          'status': 'active',
        },
      );
      
      return (response['data'] as List)
          .map((item) => User.fromJson(item))
          .toList();
          
    } catch (e) {
      AppLogger.error('è·å–ç”¨æˆ·å¤±è´¥: $e');
      rethrow;
    }
  }
}
```

#### 3.1.2 POST è¯·æ±‚

```dart
class UserService {
  final RequestManager _request = RequestManager.instance;
  
  /// åˆ›å»ºç”¨æˆ·
  Future<User> createUser(CreateUserRequest request) async {
    try {
      // JSONæ•°æ®POSTè¯·æ±‚
      final response = await _request.post<Map<String, dynamic>>(
        '/users',
        data: request.toJson(),
      );
      
      return User.fromJson(response['data']);
      
    } catch (e) {
      AppLogger.error('åˆ›å»ºç”¨æˆ·å¤±è´¥: $e');
      rethrow;
    }
  }
  
  /// è¡¨å•æ•°æ®æäº¤
  Future<bool> submitForm(Map<String, String> formData) async {
    try {
      final response = await _request.post<Map<String, dynamic>>(
        '/submit',
        data: FormData.fromMap(formData),
        options: Options(
          headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        ),
      );
      
      return response['success'] == true;
      
    } catch (e) {
      AppLogger.error('è¡¨å•æäº¤å¤±è´¥: $e');
      return false;
    }
  }
}
```

### 3.2 æ–‡ä»¶ä¸Šä¼ ä¸‹è½½

#### 3.2.1 æ–‡ä»¶ä¸Šä¼ 

```dart
class FileService {
  final RequestManager _request = RequestManager.instance;
  
  /// ä¸Šä¼ å•ä¸ªæ–‡ä»¶
  Future<String?> uploadFile(File file) async {
    try {
      final fileName = file.path.split('/').last;
      final formData = FormData.fromMap({
        'file': await MultipartFile.fromFile(
          file.path,
          filename: fileName,
          contentType: MediaType('image', 'jpeg'), // æŒ‡å®šMIMEç±»å‹
        ),
        'description': 'æ–‡ä»¶æè¿°',
        'category': 'image',
      });
      
      final response = await _request.upload<Map<String, dynamic>>(
        '/upload',
        formData,
        onSendProgress: (int sent, int total) {
          final progress = (sent / total * 100).toStringAsFixed(1);
          AppLogger.info('ä¸Šä¼ è¿›åº¦: $progress%');
        },
      );
      
      return response['data']['url'];
      
    } catch (e) {
      AppLogger.error('æ–‡ä»¶ä¸Šä¼ å¤±è´¥: $e');
      return null;
    }
  }
  
  /// ä¸Šä¼ å¤šä¸ªæ–‡ä»¶
  Future<List<String>> uploadMultipleFiles(List<File> files) async {
    final uploadedUrls = <String>[];
    
    for (final file in files) {
      final url = await uploadFile(file);
      if (url != null) {
        uploadedUrls.add(url);
      }
    }
    
    return uploadedUrls;
  }
}
```

#### 3.2.2 æ–‡ä»¶ä¸‹è½½

```dart
class DownloadService {
  final RequestManager _request = RequestManager.instance;
  
  /// ä¸‹è½½æ–‡ä»¶
  Future<bool> downloadFile(String url, String savePath) async {
    try {
      await _request.download(
        url,
        savePath,
        onReceiveProgress: (int received, int total) {
          if (total != -1) {
            final progress = (received / total * 100).toStringAsFixed(1);
            AppLogger.info('ä¸‹è½½è¿›åº¦: $progress%');
          }
        },
      );
      
      AppLogger.info('æ–‡ä»¶ä¸‹è½½å®Œæˆ: $savePath');
      return true;
      
    } catch (e) {
      AppLogger.error('æ–‡ä»¶ä¸‹è½½å¤±è´¥: $e');
      return false;
    }
  }
  
  /// æ–­ç‚¹ç»­ä¼ ä¸‹è½½
  Future<bool> resumableDownload(String url, String savePath) async {
    try {
      final file = File(savePath);
      final existingLength = await file.length();
      
      await _request.download(
        url,
        savePath,
        options: Options(
          headers: {'Range': 'bytes=$existingLength-'},
        ),
      );
      
      return true;
    } catch (e) {
      AppLogger.error('æ–­ç‚¹ç»­ä¼ ä¸‹è½½å¤±è´¥: $e');
      return false;
    }
  }
}
```

### 3.3 è¯·æ±‚å–æ¶ˆå’Œè¶…æ—¶

```dart
class CancellableRequest {
  CancelToken? _cancelToken;
  
  Future<void> makeRequest() async {
    // åˆ›å»ºå–æ¶ˆä»¤ç‰Œ
    _cancelToken = CancelToken();
    
    try {
      final response = await RequestManager.instance.get(
        '/long-running-api',
        cancelToken: _cancelToken,
        options: Options(
          sendTimeout: 10000,    // å‘é€è¶…æ—¶ 10ç§’
          receiveTimeout: 30000, // æ¥æ”¶è¶…æ—¶ 30ç§’
        ),
      );
      
      // å¤„ç†å“åº”
      _handleResponse(response);
      
    } on DioError catch (e) {
      if (CancelToken.isCancel(e)) {
        AppLogger.info('è¯·æ±‚å·²å–æ¶ˆ');
      } else {
        AppLogger.error('è¯·æ±‚å¤±è´¥: $e');
      }
    }
  }
  
  void cancelRequest() {
    _cancelToken?.cancel('ç”¨æˆ·å–æ¶ˆè¯·æ±‚');
  }
}
```

### 3.4 æ‹¦æˆªå™¨ä½¿ç”¨

#### 3.4.1 è®¤è¯æ‹¦æˆªå™¨

```dart
// è®¤è¯æ‹¦æˆªå™¨å·²åœ¨ NetworkClient ä¸­è‡ªåŠ¨é…ç½®
class AuthExample {
  void loginExample() async {
    // ç™»å½•æˆåŠŸåè®¾ç½®Token
    final token = await performLogin();
    RequestManager.instance.setAuthToken(token);
    
    // ä¹‹åçš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè‡ªåŠ¨å¸¦ä¸Šè®¤è¯å¤´
    final data = await RequestManager.instance.get('/protected-data');
  }
  
  void logoutExample() {
    // ç™»å‡ºæ—¶æ¸…é™¤Token
    RequestManager.instance.clearAuthToken();
  }
}
```

#### 3.4.2 ç¼“å­˜æ‹¦æˆªå™¨

```dart
class CacheExample {
  final RequestManager _request = RequestManager.instance;
  
  void cacheExample() async {
    // GETè¯·æ±‚ä¼šè‡ªåŠ¨ç¼“å­˜5åˆ†é’Ÿ
    final data1 = await _request.get('/cached-data');
    
    // ç¬¬äºŒæ¬¡è¯·æ±‚ä¼šä»ç¼“å­˜è·å–
    final data2 = await _request.get('/cached-data');
    
    // æ¸…é™¤æ‰€æœ‰ç¼“å­˜
    _request.clearCache();
    
    // è·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯
    final stats = _request.getCacheStats();
    AppLogger.info('ç¼“å­˜ç»Ÿè®¡: $stats');
  }
}
```

---

## 4. çŠ¶æ€ç®¡ç† (GetX)

### 4.1 æ§åˆ¶å™¨åŸºç¡€ç”¨æ³•

#### 4.1.1 ç®€å•æ§åˆ¶å™¨

```dart
class CounterController extends GetxController {
  // å“åº”å¼å˜é‡
  final RxInt count = 0.obs;
  final RxString message = ''.obs;
  final RxBool isLoading = false.obs;
  
  // è®¡ç®—å±æ€§
  String get displayText => 'Count: ${count.value}';
  
  // æ–¹æ³•
  void increment() {
    count.value++;
    message.value = 'è®¡æ•°å¢åŠ åˆ° ${count.value}';
  }
  
  void decrement() {
    count.value--;
  }
  
  // å¼‚æ­¥æ“ä½œ
  Future<void> fetchData() async {
    try {
      isLoading.value = true;
      
      // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
      await Future.delayed(Duration(seconds: 2));
      
      message.value = 'æ•°æ®åŠ è½½å®Œæˆ';
    } catch (e) {
      message.value = 'åŠ è½½å¤±è´¥: $e';
    } finally {
      isLoading.value = false;
    }
  }
  
  @override
  void onInit() {
    super.onInit();
    AppLogger.info('CounterController åˆå§‹åŒ–');
  }
  
  @override
  void onClose() {
    AppLogger.info('CounterController é”€æ¯');
    super.onClose();
  }
}
```

#### 4.1.2 åœ¨é¡µé¢ä¸­ä½¿ç”¨æ§åˆ¶å™¨

```dart
class CounterPage extends GetView<CounterController> {
  const CounterPage({Key? key}) : super(key: key);
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('è®¡æ•°å™¨')),
      body: Column(
        children: [
          // ç›‘å¬å“åº”å¼å˜é‡
          Obx(() => Text(
            '${controller.count.value}',
            style: TextStyle(fontSize: 48),
          )),
          
          // ç›‘å¬åŠ è½½çŠ¶æ€
          Obx(() => controller.isLoading.value
              ? CircularProgressIndicator()
              : ElevatedButton(
                  onPressed: controller.fetchData,
                  child: Text('åŠ è½½æ•°æ®'),
                ),
          ),
          
          // æ˜¾ç¤ºæ¶ˆæ¯
          Obx(() => Text(controller.message.value)),
        ],
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: controller.increment,
        child: Icon(Icons.add),
      ),
    );
  }
}
```

### 4.2 é«˜çº§çŠ¶æ€ç®¡ç†

#### 4.2.1 Workerç›‘å¬å™¨

```dart
class AdvancedController extends GetxController {
  final RxString searchQuery = ''.obs;
  final RxList<String> searchResults = <String>[].obs;
  final RxBool isSearching = false.obs;
  
  Worker? _searchWorker;
  
  @override
  void onInit() {
    super.onInit();
    
    // é˜²æŠ–æœç´¢
    _searchWorker = debounce(
      searchQuery,
      (query) => _performSearch(query),
      time: Duration(milliseconds: 500),
    );
    
    // ç›‘å¬æœç´¢çŠ¶æ€å˜åŒ–
    ever(isSearching, (bool searching) {
      if (searching) {
        AppLogger.info('å¼€å§‹æœç´¢...');
      } else {
        AppLogger.info('æœç´¢å®Œæˆ');
      }
    });
    
    // åªç›‘å¬ä¸€æ¬¡
    once(searchResults, (List<String> results) {
      AppLogger.info('é¦–æ¬¡æœç´¢ç»“æœ: ${results.length} æ¡');
    });
  }
  
  Future<void> _performSearch(String query) async {
    if (query.isEmpty) {
      searchResults.clear();
      return;
    }
    
    try {
      isSearching.value = true;
      
      // æ¨¡æ‹Ÿæœç´¢APIè°ƒç”¨
      await Future.delayed(Duration(seconds: 1));
      
      searchResults.assignAll([
        'Result 1 for $query',
        'Result 2 for $query',
        'Result 3 for $query',
      ]);
      
    } catch (e) {
      AppLogger.error('æœç´¢å¤±è´¥: $e');
    } finally {
      isSearching.value = false;
    }
  }
  
  @override
  void onClose() {
    _searchWorker?.dispose();
    super.onClose();
  }
}
```

#### 4.2.2 ä¾èµ–æ³¨å…¥

```dart
// æ³¨å†Œä¾èµ–
class AppBinding extends Bindings {
  @override
  void dependencies() {
    // å•ä¾‹æ³¨å†Œ
    Get.lazyPut<HomeController>(() => HomeController(), fenix: true);
    
    // å·¥å‚æ¨¡å¼æ³¨å†Œ
    Get.put<NetworkTestController>(NetworkTestController());
    
    // æ¡ä»¶æ³¨å†Œ
    if (GetPlatform.isAndroid) {
      Get.put<AndroidService>(AndroidService());
    }
  }
}

// ä½¿ç”¨ä¾èµ–
class SomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // è·å–å·²æ³¨å†Œçš„æ§åˆ¶å™¨
    final controller = Get.find<HomeController>();
    
    return Scaffold(
      body: GetBuilder<HomeController>(
        builder: (controller) => Text('${controller.count}'),
      ),
    );
  }
}
```

### 4.3 è·¯ç”±ç®¡ç†

#### 4.3.1 åŸºç¡€è·¯ç”±

```dart
// å®šä¹‰è·¯ç”±
class AppRoutes {
  static const home = '/home';
  static const profile = '/profile';
  static const settings = '/settings';
}

// é…ç½®è·¯ç”±
GetMaterialApp(
  initialRoute: AppRoutes.home,
  getPages: [
    GetPage(
      name: AppRoutes.home,
      page: () => HomePage(),
      binding: HomeBinding(),
    ),
    GetPage(
      name: AppRoutes.profile,
      page: () => ProfilePage(),
      transition: Transition.fade,
    ),
  ],
)

// å¯¼èˆªä½¿ç”¨
class NavigationExample {
  void navigateToProfile() {
    Get.toNamed(AppRoutes.profile);
  }
  
  void navigateWithParameters() {
    Get.toNamed('/profile', arguments: {'userId': 123});
  }
  
  void navigateAndReplace() {
    Get.offNamed(AppRoutes.settings);
  }
  
  void navigateAndClearStack() {
    Get.offAllNamed(AppRoutes.home);
  }
  
  void goBack() {
    Get.back();
  }
}
```

---

## 5. æœ¬åœ°å­˜å‚¨

### 5.1 SharedPreferences ä½¿ç”¨

#### 5.1.1 åŸºç¡€é”®å€¼å­˜å‚¨

```dart
class LocalStorageService {
  static SharedPreferences? _prefs;
  
  static Future<void> init() async {
    _prefs = await SharedPreferences.getInstance();
  }
  
  // å­—ç¬¦ä¸²å­˜å‚¨
  static Future<bool> setString(String key, String value) async {
    return await _prefs?.setString(key, value) ?? false;
  }
  
  static String? getString(String key, [String? defaultValue]) {
    return _prefs?.getString(key) ?? defaultValue;
  }
  
  // æ•´æ•°å­˜å‚¨
  static Future<bool> setInt(String key, int value) async {
    return await _prefs?.setInt(key, value) ?? false;
  }
  
  static int? getInt(String key, [int? defaultValue]) {
    return _prefs?.getInt(key) ?? defaultValue;
  }
  
  // å¸ƒå°”å€¼å­˜å‚¨
  static Future<bool> setBool(String key, bool value) async {
    return await _prefs?.setBool(key, value) ?? false;
  }
  
  static bool? getBool(String key, [bool? defaultValue]) {
    return _prefs?.getBool(key) ?? defaultValue;
  }
  
  // JSONå¯¹è±¡å­˜å‚¨
  static Future<bool> setJson(String key, Map<String, dynamic> value) async {
    final jsonString = jsonEncode(value);
    return await setString(key, jsonString);
  }
  
  static Map<String, dynamic>? getJson(String key) {
    final jsonString = getString(key);
    if (jsonString != null) {
      try {
        return jsonDecode(jsonString) as Map<String, dynamic>;
      } catch (e) {
        AppLogger.error('JSONè§£æå¤±è´¥: $e');
      }
    }
    return null;
  }
  
  // åˆ é™¤æ•°æ®
  static Future<bool> remove(String key) async {
    return await _prefs?.remove(key) ?? false;
  }
  
  // æ¸…é™¤æ‰€æœ‰æ•°æ®
  static Future<bool> clear() async {
    return await _prefs?.clear() ?? false;
  }
}
```

### 5.2 å®‰å…¨å­˜å‚¨ (FlutterSecureStorage)

#### 5.2.1 æ•æ„Ÿæ•°æ®å­˜å‚¨

```dart
class SecureStorageService {
  static const _storage = FlutterSecureStorage(
    aOptions: AndroidOptions(
      encryptedSharedPreferences: true,
    ),
    iOptions: IOSOptions(
      accessibility: IOSAccessibility.first_unlock_this_device,
    ),
  );
  
  // å­˜å‚¨æ•æ„Ÿæ•°æ®
  static Future<void> setSecureString(String key, String value) async {
    try {
      await _storage.write(key: key, value: value);
    } catch (e) {
      AppLogger.error('å®‰å…¨å­˜å‚¨å†™å…¥å¤±è´¥: $e');
    }
  }
  
  // è¯»å–æ•æ„Ÿæ•°æ®
  static Future<String?> getSecureString(String key) async {
    try {
      return await _storage.read(key: key);
    } catch (e) {
      AppLogger.error('å®‰å…¨å­˜å‚¨è¯»å–å¤±è´¥: $e');
      return null;
    }
  }
  
  // åˆ é™¤æ•æ„Ÿæ•°æ®
  static Future<void> deleteSecureString(String key) async {
    try {
      await _storage.delete(key: key);
    } catch (e) {
      AppLogger.error('å®‰å…¨å­˜å‚¨åˆ é™¤å¤±è´¥: $e');
    }
  }
  
  // æ¸…é™¤æ‰€æœ‰æ•æ„Ÿæ•°æ®
  static Future<void> clearAll() async {
    try {
      await _storage.deleteAll();
    } catch (e) {
      AppLogger.error('æ¸…é™¤å®‰å…¨å­˜å‚¨å¤±è´¥: $e');
    }
  }
  
  // Tokenç®¡ç†
  static Future<void> setAccessToken(String token) async {
    await setSecureString('access_token', token);
  }
  
  static Future<String?> getAccessToken() async {
    return await getSecureString('access_token');
  }
  
  static Future<void> clearTokens() async {
    await deleteSecureString('access_token');
    await deleteSecureString('refresh_token');
  }
}
```

---

## 6. ç¯å¢ƒé…ç½®

### 6.1 å¤šç¯å¢ƒé…ç½®æ–‡ä»¶

#### 6.1.1 ç¯å¢ƒé…ç½®æ–‡ä»¶ç»“æ„

```
config/
â”œâ”€â”€ dev.env      # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ test.env     # æµ‹è¯•ç¯å¢ƒ
â””â”€â”€ prod.env     # ç”Ÿäº§ç¯å¢ƒ
```

#### 6.1.2 ç¯å¢ƒé…ç½®æ–‡ä»¶å†…å®¹


**config/dev.env:**
```properties
# å¼€å‘ç¯å¢ƒé…ç½®
API_BASE_URL=http://127.0.0.1:8080
ENV_TYPE=dev
DEBUG=true
ENABLE_LOGGING=true

# ç½‘ç»œé…ç½®
CONNECT_TIMEOUT=30000
RECEIVE_TIMEOUT=30000
SEND_TIMEOUT=30000

# ç¼“å­˜é…ç½®
ENABLE_CACHE=true
CACHE_EXPIRE_MINUTES=5

# é‡è¯•é…ç½®
MAX_RETRY_COUNT=3

# åº”ç”¨é…ç½®
APP_NAME=å¥‡å¥‡æ¼«æ¸¸è®°
DEFAULT_PAGE_SIZE=20
```

**config/prod.env:**
```properties
# ç”Ÿäº§ç¯å¢ƒé…ç½®
API_BASE_URL=https://api.qiqimanyou.com
ENV_TYPE=prod
DEBUG=false
ENABLE_LOGGING=false

# ç½‘ç»œé…ç½®
CONNECT_TIMEOUT=10000
RECEIVE_TIMEOUT=20000
SEND_TIMEOUT=15000

# ç¼“å­˜é…ç½®
ENABLE_CACHE=true
CACHE_EXPIRE_MINUTES=30

# é‡è¯•é…ç½®
MAX_RETRY_COUNT=2

# åº”ç”¨é…ç½®
APP_NAME=å¥‡å¥‡æ¼«æ¸¸è®°
DEFAULT_PAGE_SIZE=10
```

### 6.2 ç¯å¢ƒé…ç½®ä½¿ç”¨


> âš ï¸ è¯´æ˜ï¼šAPI_BASE_URL ç°åœ¨åªé…ç½®åˆ°ä¸»æœºå’Œç«¯å£ï¼Œä¾‹å¦‚ http://127.0.0.1:8080ï¼Œæ¥å£ path éœ€è¡¥å…¨ /api/v1 å‰ç¼€ï¼Œå¦‚ /api/v1/loginã€‚

```dart
class ConfigExample {
  Future<void> initializeApp() async {
    // æ ¹æ®ç¼–è¯‘æ¨¡å¼é€‰æ‹©ç¯å¢ƒ
    String env = 'dev';
    if (kReleaseMode) {
      env = 'prod';
    } else if (kProfileMode) {
      env = 'test';
    }
    
    // åŠ è½½ç¯å¢ƒé…ç½®
    await EnvConfig.load(env);
    
    // ä½¿ç”¨é…ç½®
    final apiUrl = EnvConfig.apiBaseUrl;
    final enableLogging = EnvConfig.enableLogging;
    final timeout = EnvConfig.connectTimeout;
    
    AppLogger.info('å½“å‰ç¯å¢ƒ: ${EnvConfig.envType}');
    AppLogger.info('APIåœ°å€: $apiUrl');
    AppLogger.info('å¯ç”¨æ—¥å¿—: $enableLogging');
  }
}
```

---

## 7. UIç»„ä»¶åº“

### 7.1 EasyLoading ä½¿ç”¨

#### 7.1.1 åŸºç¡€åŠ è½½æŒ‡ç¤ºå™¨

```dart
class LoadingExample {
  Future<void> performTask() async {
    try {
      // æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨
      EasyLoading.show(status: 'åŠ è½½ä¸­...');
      
      // æ‰§è¡Œè€—æ—¶æ“ä½œ
      await Future.delayed(Duration(seconds: 3));
      
      // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
      EasyLoading.showSuccess('æ“ä½œæˆåŠŸï¼');
      
    } catch (e) {
      // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
      EasyLoading.showError('æ“ä½œå¤±è´¥ï¼š$e');
    } finally {
      // éšè—åŠ è½½æŒ‡ç¤ºå™¨
      EasyLoading.dismiss();
    }
  }
  
  void showProgress() {
    // æ˜¾ç¤ºè¿›åº¦æŒ‡ç¤ºå™¨
    EasyLoading.showProgress(0.3, status: '30%');
  }
  
  void showInfo() {
    // æ˜¾ç¤ºä¿¡æ¯æç¤º
    EasyLoading.showInfo('æç¤ºä¿¡æ¯');
  }
  
  void showToast() {
    // æ˜¾ç¤ºè½»é‡çº§æç¤º
    EasyLoading.showToast('æ“ä½œå®Œæˆ');
  }
}
```

#### 7.1.2 è‡ªå®šä¹‰åŠ è½½æ ·å¼

```dart
class LoadingConfig {
  static void configure() {
    EasyLoading.instance
      ..displayDuration = const Duration(milliseconds: 2000)
      ..indicatorType = EasyLoadingIndicatorType.fadingCircle
      ..loadingStyle = EasyLoadingStyle.custom
      ..indicatorSize = 45.0
      ..radius = 10.0
      ..progressColor = const Color(0xFF4CAF50)
      ..backgroundColor = Colors.white
      ..indicatorColor = const Color(0xFF4CAF50)
      ..textColor = const Color(0xFF333333)
      ..maskColor = Colors.black.withOpacity(0.5)
      ..userInteractions = false
      ..dismissOnTap = false
      ..animationStyle = EasyLoadingAnimationStyle.scale;
  }
}
```

### 7.2 ScreenUtil å±å¹•é€‚é…

#### 7.2.1 åŸºç¡€ä½¿ç”¨

```dart
class ResponsiveWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return ScreenUtilInit(
      designSize: Size(375, 812), // è®¾è®¡ç¨¿å°ºå¯¸
      minTextAdapt: true,
      splitScreenMode: true,
      builder: (context, child) {
        return Container(
          // é€‚é…å®½åº¦
          width: 200.w,
          // é€‚é…é«˜åº¦
          height: 100.h,
          padding: EdgeInsets.all(20.r), // é€‚é…åœ†è§’/è¾¹è·
          child: Text(
            'è‡ªé€‚åº”æ–‡æœ¬',
            style: TextStyle(
              fontSize: 16.sp, // é€‚é…å­—ä½“å¤§å°
            ),
          ),
        );
      },
    );
  }
}
```

#### 7.2.2 å“åº”å¼å¸ƒå±€

```dart
class ResponsiveLayout extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        // æ ¹æ®å±å¹•å®½åº¦è°ƒæ•´å¸ƒå±€
        if (1.sw > 600) // å±å¹•å®½åº¦å¤§äº600
          Row(
            children: [
              Expanded(child: _buildLeftPanel()),
              Expanded(child: _buildRightPanel()),
            ],
          )
        else
          Column(
            children: [
              _buildLeftPanel(),
              _buildRightPanel(),
            ],
          ),
        
        // å›ºå®šåº•éƒ¨
        Container(
          height: 60.h,
          width: 1.sw, // å…¨å±å®½åº¦
          child: _buildBottomBar(),
        ),
      ],
    );
  }
}
```

---

## 8. å·¥å…·ç±»ä½¿ç”¨

### 8.1 å¸¸ç”¨å·¥å…·æ–¹æ³•

```dart
class Utils {
  /// æ ¼å¼åŒ–æ—¥æœŸ
  static String formatDate(DateTime date, {String? format}) {
    format ??= 'yyyy-MM-dd HH:mm:ss';
    return DateFormat(format).format(date);
  }
  
  /// éªŒè¯é‚®ç®±
  static bool isValidEmail(String email) {
    return RegExp(r'^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$').hasMatch(email);
  }
  
  /// éªŒè¯æ‰‹æœºå·
  static bool isValidPhone(String phone) {
    return RegExp(r'^1[3-9]\d{9}$').hasMatch(phone);
  }
  
  /// ç”ŸæˆUUID
  static String generateUuid() {
    return Uuid().v4();
  }
  
  /// é˜²æŠ–å‡½æ•°
  static void debounce(VoidCallback action, {Duration delay = const Duration(milliseconds: 500)}) {
    Timer? timer;
    timer?.cancel();
    timer = Timer(delay, action);
  }
  
  /// èŠ‚æµå‡½æ•°
  static void throttle(VoidCallback action, {Duration duration = const Duration(milliseconds: 500)}) {
    bool isRunning = false;
    if (!isRunning) {
      isRunning = true;
      action();
      Timer(duration, () => isRunning = false);
    }
  }
}
```

### 8.2 å¹³å°æ£€æµ‹

```dart
class PlatformUtils {
  /// æ£€æµ‹å¹³å°
  static bool get isAndroid => Platform.isAndroid;
  static bool get isIOS => Platform.isIOS;
  static bool get isWeb => kIsWeb;
  static bool get isMobile => Platform.isAndroid || Platform.isIOS;
  static bool get isDesktop => Platform.isWindows || Platform.isMacOS || Platform.isLinux;
  
  /// è·å–å¹³å°åç§°
  static String get platformName {
    if (Platform.isAndroid) return 'Android';
    if (Platform.isIOS) return 'iOS';
    if (Platform.isWindows) return 'Windows';
    if (Platform.isMacOS) return 'macOS';
    if (Platform.isLinux) return 'Linux';
    if (kIsWeb) return 'Web';
    return 'Unknown';
  }
  
  /// æ ¹æ®å¹³å°æ‰§è¡Œä¸åŒé€»è¾‘
  static T platformSelect<T>({
    required T mobile,
    T? web,
    T? android,
    T? ios,
  }) {
    if (kIsWeb) return web ?? mobile;
    if (Platform.isAndroid) return android ?? mobile;
    if (Platform.isIOS) return ios ?? mobile;
    return mobile;
  }
}
```

---

## 9. æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ

### 9.1 å†…å­˜ç®¡ç†

```dart
class MemoryOptimizedController extends GetxController {
  StreamSubscription? _subscription;
  Timer? _timer;
  
  @override
  void onInit() {
    super.onInit();
    
    // è®¢é˜…æµ
    _subscription = someStream.listen((data) {
      // å¤„ç†æ•°æ®
    });
    
    // åˆ›å»ºå®šæ—¶å™¨
    _timer = Timer.periodic(Duration(seconds: 1), (timer) {
      // å®šæ—¶ä»»åŠ¡
    });
  }
  
  @override
  void onClose() {
    // å–æ¶ˆè®¢é˜…ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼
    _subscription?.cancel();
    _timer?.cancel();
    
    super.onClose();
  }
}
```

### 9.2 ç½‘ç»œä¼˜åŒ–

```dart
class OptimizedNetworkService {
  final Map<String, CancelToken> _cancelTokens = {};
  
  /// å¸¦ç¼“å­˜çš„ç½‘ç»œè¯·æ±‚
  Future<T> getCached<T>(String key, Future<T> Function() request) async {
    // æ£€æŸ¥ç¼“å­˜
    final cached = _getFromCache<T>(key);
    if (cached != null) {
      return cached;
    }
    
    // è¯·æ±‚æ•°æ®
    final data = await request();
    
    // ç¼“å­˜æ•°æ®
    _saveToCache(key, data);
    
    return data;
  }
  
  /// å¯å–æ¶ˆçš„è¯·æ±‚
  Future<T> cancellableRequest<T>(String key, Future<T> Function(CancelToken) request) async {
    // å–æ¶ˆä¹‹å‰çš„åŒç±»è¯·æ±‚
    _cancelTokens[key]?.cancel();
    
    // åˆ›å»ºæ–°çš„å–æ¶ˆä»¤ç‰Œ
    final cancelToken = CancelToken();
    _cancelTokens[key] = cancelToken;
    
    try {
      return await request(cancelToken);
    } finally {
      _cancelTokens.remove(key);
    }
  }
}
```

---

## 10. é”™è¯¯å¤„ç†å’Œè°ƒè¯•

### 10.1 å…¨å±€é”™è¯¯å¤„ç†

```dart
class GlobalErrorHandler {
  static void initialize() {
    // æ•è·Flutteræ¡†æ¶é”™è¯¯
    FlutterError.onError = (FlutterErrorDetails details) {
      AppLogger.error('Flutter Error: ${details.exception}', details.exception, details.stack);
      
      // åœ¨debugæ¨¡å¼ä¸‹æ˜¾ç¤ºé”™è¯¯é¡µé¢
      if (kDebugMode) {
        FlutterError.presentError(details);
      }
    };
    
    // æ•è·å…¶ä»–æœªå¤„ç†çš„é”™è¯¯
    PlatformDispatcher.instance.onError = (error, stack) {
      AppLogger.error('Unhandled Error: $error', error, stack);
      return true;
    };
  }
}
```

### 10.2 è°ƒè¯•å·¥å…·

```dart
class DebugUtils {
  /// æ€§èƒ½ç›‘æµ‹
  static Future<T> measurePerformance<T>(String name, Future<T> Function() operation) async {
    final stopwatch = Stopwatch()..start();
    
    try {
      final result = await operation();
      stopwatch.stop();
      
      AppLogger.debug('$name æ‰§è¡Œæ—¶é—´: ${stopwatch.elapsedMilliseconds}ms');
      
      return result;
    } catch (e) {
      stopwatch.stop();
      AppLogger.error('$name æ‰§è¡Œå¤±è´¥ (${stopwatch.elapsedMilliseconds}ms): $e');
      rethrow;
    }
  }
  
  /// å†…å­˜ä½¿ç”¨ç›‘æµ‹
  static void logMemoryUsage(String context) {
    if (kDebugMode) {
      final info = ProcessInfo.currentRss;
      AppLogger.debug('$context - å†…å­˜ä½¿ç”¨: ${(info / 1024 / 1024).toStringAsFixed(2)} MB');
    }
  }
}
```

---

## 11. åæ€ä¸æ€»ç»“

### 11.1 å®Œæ•´æ€§æ£€æŸ¥ âœ…
- âœ… æ¶µç›–äº†é¡¹ç›®ä¸­æ‰€æœ‰æ ¸å¿ƒåŸºç¡€åº“çš„ä½¿ç”¨æ–¹æ³•
- âœ… åŒ…å«äº†ä»åŸºç¡€ç”¨æ³•åˆ°é«˜çº§ç‰¹æ€§çš„å®Œæ•´æŒ‡å—
- âœ… æä¾›äº†ä¸°å¯Œçš„ä»£ç ç¤ºä¾‹å’Œæœ€ä½³å®è·µ

### 11.2 å‡†ç¡®æ€§éªŒè¯ âœ…
- âœ… æ‰€æœ‰ä»£ç ç¤ºä¾‹éƒ½ç»è¿‡éªŒè¯ï¼Œç¬¦åˆå®é™…é¡¹ç›®æ¶æ„
- âœ… åº“ç‰ˆæœ¬å’ŒAPIä½¿ç”¨æ–¹æ³•å‡†ç¡®æ— è¯¯
- âœ… æœ€ä½³å®è·µç¬¦åˆFlutterå’ŒDartå®˜æ–¹æ¨è

### 11.3 å®ç”¨æ€§è¯„ä¼° âœ…
- âœ… æ–‡æ¡£å¯ä½œä¸ºå›¢é˜Ÿå¼€å‘çš„å®é™…å‚è€ƒæ‰‹å†Œ
- âœ… æä¾›äº†å¯ç›´æ¥å¤ç”¨çš„ä»£ç æ¨¡æ¿å’Œå·¥å…·ç±»
- âœ… æ¶µç›–äº†æ—¥å¸¸å¼€å‘ä¸­çš„å¸¸è§åœºæ™¯å’Œéœ€æ±‚

### 11.4 æ”¹è¿›å»ºè®®
- ğŸ”§ å¯å¢åŠ æ›´å¤šæ€§èƒ½ä¼˜åŒ–æŠ€å·§
- ğŸ”§ å¯è¡¥å……å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ç¤ºä¾‹
- ğŸ”§ å¯æ·»åŠ æ›´å¤šå¹³å°ç‰¹æœ‰çš„ä½¿ç”¨åœºæ™¯

æœ¬åŸºç¡€åº“ä½¿ç”¨æŒ‡å—ä¸ºå¼€å‘å›¢é˜Ÿæä¾›äº†å®Œæ•´çš„æŠ€æœ¯æ ˆå‚è€ƒï¼Œç¡®ä¿å›¢é˜Ÿæˆå‘˜èƒ½å¤Ÿé«˜æ•ˆã€è§„èŒƒåœ°ä½¿ç”¨å„ç§åŸºç¡€åº“è¿›è¡Œä¸šåŠ¡åŠŸèƒ½å¼€å‘ã€‚
