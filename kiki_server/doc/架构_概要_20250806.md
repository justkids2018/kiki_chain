
学习任务页面 

概要目标

将「选择老师页面」改为 学习任务页面，页面分为上下两部分（两个独立 Widget）：原选择老师页面不改动，用新的页面来开发
	•	上：老师选择区（横向单选列表，默认选中第一个）
	•	下：作业列表区（借鉴老师布置作业的页面；可复用 API，但 UI 要新写）
    
⸻

必读（开发前必须完成）
	•	动态读取并遵循：doc/prompt/base_*.md（所有基础开发规范）
	•	按模板开发：doc/framework/新功能开发指南标准_20250916.md
	•	UI 设计参照：doc/prompt/ui_prompt_ui.md

⸻

交付物（本需求最终应产出）
	1.	StudyTask 页面（容器）—— 包含上下两独立 Widget 的集成
	2.	TeacherSelector 独立 Widget（上部）
	3.	HomeworkList 独立 Widget（下部）
	4.	Controller 文档（职责与公开状态/方法）
	5.	Precheck 文档（列出所读取的 base_* 约束与已对齐项）
	6.	测试清单与测试用例（unit / widget / 集成）
	7.	PR 合并说明（包含遵循的 docs 列表）

⸻

逐步任务（每项写成单独 ticket 执行）

0. 预检（必做）
	•	操作：读取并摘录 doc/prompt/base_*.md、开发指南模板及 UI 文档中的强制项。
	•	产出：study_task_precheck.md（列出必须遵守项与影响点）。
	•	验收：reviewer 确认 precheck。

1. API & 实体校对
	•	操作：确认后端可用接口（教师列表、按教师查询作业）与返回字段；确认现有 TeacherEntity、HomeworkEntity 字段满足 UI 需求（如头像、title、id、create_time 等）。
	•	产出：接口样例 + 实体字段映射表。
	•	验收：接口与实体字段无歧义（或记录需后端补充项）。

2. Repository 验证（复用）
	•	操作：确认现有 teacher_repository & homework_repository（均通过 RequestManager），并能按实体返回数据；如需 adapter，制定 Adapter 方案（不改 RequestManager 策略）。
	•	产出：Repository 接口说明（方法签名、异常类型）。
	•	验收：Mock 调用能返回有效实体列表。

3. Controller 设计（职责分明）
	•	操作：定义并创建两个 controller（TeacherSelectorController、HomeworkListController）或一个协调 controller + 两个轻量 controller，但必须保持上/下独立职责。列出公开状态与方法（加载/选择/刷新/错误处理）。
	•	产出：Controller 接口文档（字段、observable 状态、方法、错误状态）。
	•	验收：单元测试用例（mock repo）能覆盖：默认选中第一个、切换触发下方刷新、错误状态处理。

4. Widget 设计（完全独立）
	•	操作：定义两个独立 Widget 的输入/输出 contract（props 或通过 controller 注入）：
	•	TeacherSelectorWidget 接收（teachers 列表、selectedId、onSelect 回调）并只负责渲染 + 触发选择事件。
	•	HomeworkListWidget 接收（homeworks 列表、isLoading、error、onRefresh）并只负责渲染。
	•	产出：Widget 接口说明与 UI 视觉稿/对照 ui_prompt_ui.md 的样式要点（卡片尺寸、间距、圆角、选中态表现）。
	•	验收：Widget 能独立在 isolation（Storybook/Widget test）渲染并通过交互回调。

5. 页面集成与路由
	•	操作：创建容器页面 StudyTaskPage，仅负责布局（上/下 Widget 占比和自适应）、路由注册（AppConstants / AppRoutes）。注入 controller。
	•	产出：路由注册说明与页面集成说明。
	•	验收：访问路由能展示页面、自动触发教师列表加载并默认选中第一个。

6. UX & 边界处理
	•	明确并实现以下行为（文档化）：
	•	老师列表为空 → 显示“暂无老师”空态；禁止下方请求。
	•	作业列表为空 → 显示“暂无作业”空态；支持刷新。
	•	网络错误 → 显示错误信息并提供重试。
	•	性能：横向长列表采用懒加载展示（大数据量时），下方支持分页/上拉（如 API 支持）。
	•	可访问性：选中态有语义提示，支持键盘/无障碍操作。
	•	产出：UX 行为文档与空态设计说明。
	•	验收：QA 验证所有边界场景。

7. 测试
	•	操作：编写最小测试集：
	•	Controller 单元测试（默认选中、切换触发、错误处理）
	•	Widget 测试（渲染、交互回调、空态）
	•	集成手工/自动流（打开页面 → 默认选中 → 切换老师 → 列表刷新）
	•	产出：测试用例与 CI 运行报告。
	•	验收：测试通过或测试覆盖率达团队标准。

8. 文档与交付
	•	操作：准备 PR 文档，包含：遵循的 base_* 条目摘要、接口映射、Controller/Widget 说明、测试结果、UI 参考（链接到 ui_prompt_ui.md）。
	•	产出：doc/implementation_notes/study_task_XXX.md + PR 描述。
	•	验收：Reviewer 按 checklist 完成审查。

⸻

验收标准（简洁版）
	•	页面由两个独立 Widget组成（上：TeacherSelector，下：HomeworkList）。
	•	加载教师后默认选中第一个老师且下方作业列表随之刷新。
	•	切换老师 → 下方作业列表实时刷新（显示 loading/empty/error）。
	•	所有网络调用通过 Repository（使用 RequestManager）；presentation 无直接网络调用。
	•	Controller 使用 GetX（放在本模块 controllers 目录）。
	•	开发前读取并记录 doc/prompt/base_*.md、遵守 doc/framework/新功能开发指南标准_20250916.md、UI 参照 doc/prompt/ui_prompt_ui.md。
	•	有对应的单元/Widget/集成测试并通过。

⸻

PR 快速检查项（提交前逐项自检）
	•	precheck 文档存在并确认
	•	TeacherSelector 与 HomeworkList 为独立 Widget（接口清晰）
	•	Controller 职责分明且位于模块 controllers 下（GetX）
	•	Repository 复用并通过 RequestManager（无直接 http）
	•	UI 设计符合 ui_prompt_ui.md（卡片尺寸/间距/选中态）
	•	空态/错误/加载场景覆盖并有提示/重试
	•	测试用例（Controller/Widget/集成）通过
	•	PR 文档包含遵循的 base_* 条目摘要

⸻