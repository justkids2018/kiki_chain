# 如何编写高效的 Current-Task Prompt

## 针对自定义模式的 Prompt 编写指南

当你已经配置好 `qiqimanyou.chatmode.md` 自定义模式后，你的 prompt 可以变得非常简洁，因为 AI 已经了解了项目背景。

---

## ✅ 推荐的 Prompt 写法

### 1. **极简模式**（推荐）
```
快速实现登录页面的基础结构
```

**为什么有效**：
- AI 已经从 `current-task.md` 知道当前任务是创建登录页面
- AI 已经从架构文档知道要用 Flutter + Riverpod + Clean Architecture
- "快速" 触发了快速模式，节省 token

### 2. **指定模式**
```
学习模式：如何设计安全的登录表单验证
```

**为什么有效**：
- "学习模式" 明确触发详细分析
- AI 会展示完整的思维过程
- 适合学习新技术或复杂功能

### 3. **分步实现**
```
混合模式：实现登录页面的表单组件部分
```

**为什么有效**：
- "混合模式" 平衡了分析和代码
- 明确指定了当前要实现的部分
- AI 会基于 current-task.md 的检查清单来实现

---

## ❌ 不推荐的 Prompt 写法

### 1. **过度详细**（浪费 token）
```
❌ 我需要用 Flutter Web 创建一个登录页面，要用 Riverpod 做状态管理，
   遵循 Clean Architecture，包含用户名密码输入框，表单验证，
   API 调用，错误处理，响应式设计...
```

**问题**：AI 已经从自定义模式知道这些，重复说明浪费 token

### 2. **不明确**
```
❌ 帮我做个登录功能
```

**问题**：过于模糊，AI 不知道要实现哪个具体部分

### 3. **忽略模式**
```
❌ 给我详细分析登录功能的设计思路和完整实现代码
```

**问题**：没有指定模式，AI 可能默认使用混合模式，消耗更多 token

---

## 🎯 根据需求类型的 Prompt 模板

### **新功能开发**
```
快速实现 [功能名称] 的 [具体部分]
```
示例：`快速实现登录页面的表单验证逻辑`

### **功能优化**
```
优化 [现有功能] 的 [性能/体验/安全性]
```
示例：`优化登录页面的加载性能`

### **学习新技术**
```
学习模式：如何在 Flutter 中实现 [技术点]
```
示例：`学习模式：如何在 Flutter 中实现安全的状态管理`

### **问题排查**
```
分析 [问题现象] 的可能原因和解决方案
```
示例：`分析登录请求失败的可能原因和解决方案`

### **架构设计**
```
混合模式：设计 [系统/模块] 的架构方案
```
示例：`混合模式：设计用户认证系统的架构方案`

---

## 💡 高效 Prompt 的关键要素

### 1. **明确模式**
- 开头就说明要用哪种模式（快速/学习/混合）
- 让 AI 知道你的 token 预算和期望详细程度

### 2. **具体任务**
- 基于 current-task.md 中的检查清单
- 一次只focus一个具体的实现点

### 3. **利用上下文**
- AI 已经知道项目架构，不需要重复说明
- AI 已经知道当前任务，直接说要实现的部分

### 4. **动作导向**
- 用动词开头：实现、优化、分析、设计
- 明确期望的输出类型：代码、方案、分析

---

## 🚀 实战示例

假设你的 `current-task.md` 是登录页面创建，以下是不同场景的高效 prompt：

```
# 开始开发
快速实现登录页面的路由配置

# 遇到技术难点  
学习模式：如何在 Flutter 中实现安全的密码输入框

# 需要架构指导
混合模式：设计登录状态管理的最佳实践

# 代码优化
优化登录表单的性能和用户体验

# 问题排查
分析登录 API 调用失败的处理方案
```

---

## 📝 总结

**核心原则**：
1. **简洁优先** - 让自定义模式发挥作用
2. **模式明确** - 控制 token 消耗
3. **任务具体** - 一次专注一个点
4. **利用上下文** - 不重复已知信息

这样写 prompt，既高效又节省 token！
